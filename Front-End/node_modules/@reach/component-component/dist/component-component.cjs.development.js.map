{"version":3,"file":"component-component.cjs.development.js","sources":["../src/index.js"],"sourcesContent":["import * as React from \"react\";\nimport PropTypes from \"prop-types\";\n\nlet cleanProps = (props) => {\n  let {\n    initialState,\n    getInitialState,\n    refs,\n    getRefs,\n    didMount,\n    didUpdate,\n    willUnmount,\n    getSnapshotBeforeUpdate,\n    shouldUpdate,\n    render,\n    ...rest\n  } = props;\n  return rest;\n};\n\nclass Component extends React.Component {\n  static defaultProps = {\n    getInitialState: () => {},\n    getRefs: () => ({}),\n  };\n\n  state = this.props.initialState || this.props.getInitialState(this.props);\n  _refs = this.props.refs || this.props.getRefs(this.getArgs());\n  _setState = (...args) => this.setState(...args);\n  _forceUpdate = (...args) => this.forceUpdate(...args);\n\n  getArgs() {\n    const {\n      state,\n      props,\n      _setState: setState,\n      _forceUpdate: forceUpdate,\n      _refs: refs,\n    } = this;\n    return {\n      state,\n      props: cleanProps(props),\n      refs,\n      setState,\n      forceUpdate,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.didMount) this.props.didMount(this.getArgs());\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.shouldUpdate)\n      return this.props.shouldUpdate({\n        props: this.props,\n        state: this.state,\n        nextProps: cleanProps(nextProps),\n        nextState,\n      });\n    else return true;\n  }\n\n  componentWillUnmount() {\n    if (this.props.willUnmount)\n      this.props.willUnmount({\n        state: this.state,\n        props: cleanProps(this.props),\n        refs: this._refs,\n      });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.didUpdate)\n      this.props.didUpdate(\n        Object.assign(this.getArgs(), {\n          prevProps: cleanProps(prevProps),\n          prevState,\n        }),\n        snapshot\n      );\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    if (this.props.getSnapshotBeforeUpdate) {\n      return this.props.getSnapshotBeforeUpdate(\n        Object.assign(this.getArgs(), {\n          prevProps: cleanProps(prevProps),\n          prevState,\n        })\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const { children, render } = this.props;\n    return render\n      ? render(this.getArgs())\n      : typeof children === \"function\"\n      ? children(this.getArgs())\n      : children || null;\n  }\n}\n\nif (__DEV__) {\n  Component.displayName = \"ComponentComponent\";\n  Component.propTypes = {\n    initialState: PropTypes.object,\n    getInitialState: PropTypes.func,\n    refs: PropTypes.object,\n    getRefs: PropTypes.func,\n    didMount: PropTypes.func,\n    didUpdate: PropTypes.func,\n    willUnmount: PropTypes.func,\n    getSnapshotBeforeUpdate: PropTypes.func,\n    shouldUpdate: PropTypes.func,\n    render: PropTypes.func,\n    children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  };\n}\n\nexport { Component };\nexport default Component;\n"],"names":["cleanProps","props","initialState","getInitialState","refs","getRefs","didMount","didUpdate","willUnmount","getSnapshotBeforeUpdate","shouldUpdate","render","rest","Component","state","_refs","getArgs","_setState","setState","_forceUpdate","forceUpdate","componentDidMount","shouldComponentUpdate","nextProps","nextState","componentWillUnmount","componentDidUpdate","prevProps","prevState","snapshot","Object","assign","children","React","defaultProps","displayName","propTypes","PropTypes","object","func","oneOfType","node"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAIA,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAAA,MAExBC,YAFwB,GAatBD,KAbsB,CAExBC,YAFwB;AAAA,MAGxBC,eAHwB,GAatBF,KAbsB,CAGxBE,eAHwB;AAAA,MAIxBC,IAJwB,GAatBH,KAbsB,CAIxBG,IAJwB;AAAA,MAKxBC,OALwB,GAatBJ,KAbsB,CAKxBI,OALwB;AAAA,MAMxBC,QANwB,GAatBL,KAbsB,CAMxBK,QANwB;AAAA,MAOxBC,SAPwB,GAatBN,KAbsB,CAOxBM,SAPwB;AAAA,MAQxBC,WARwB,GAatBP,KAbsB,CAQxBO,WARwB;AAAA,MASxBC,uBATwB,GAatBR,KAbsB,CASxBQ,uBATwB;AAAA,MAUxBC,YAVwB,GAatBT,KAbsB,CAUxBS,YAVwB;AAAA,MAWxBC,MAXwB,GAatBV,KAbsB,CAWxBU,MAXwB;AAAA,MAYrBC,IAZqB,iCAatBX,KAbsB;;AAc1B,SAAOW,IAAP;AACD,CAfD;;IAiBMC;;;;;;;;;;;UAMJC,QAAQ,MAAKb,KAAL,CAAWC,YAAX,IAA2B,MAAKD,KAAL,CAAWE,eAAX,CAA2B,MAAKF,KAAhC;UACnCc,QAAQ,MAAKd,KAAL,CAAWG,IAAX,IAAmB,MAAKH,KAAL,CAAWI,OAAX,CAAmB,MAAKW,OAAL,EAAnB;;UAC3BC,YAAY;AAAA;;AAAA,aAAa,iBAAKC,QAAL,yBAAb;AAAA;;UACZC,eAAe;AAAA;;AAAA,aAAa,iBAAKC,WAAL,yBAAb;AAAA;;;;;;;SAEfJ,UAAA,mBAAU;AAAA,QAENF,KAFM,GAOJ,IAPI,CAENA,KAFM;AAAA,QAGNb,KAHM,GAOJ,IAPI,CAGNA,KAHM;AAAA,QAIKiB,QAJL,GAOJ,IAPI,CAIND,SAJM;AAAA,QAKQG,WALR,GAOJ,IAPI,CAKND,YALM;AAAA,QAMCf,IAND,GAOJ,IAPI,CAMNW,KANM;AAQR,WAAO;AACLD,MAAAA,KAAK,EAALA,KADK;AAELb,MAAAA,KAAK,EAAED,UAAU,CAACC,KAAD,CAFZ;AAGLG,MAAAA,IAAI,EAAJA,IAHK;AAILc,MAAAA,QAAQ,EAARA,QAJK;AAKLE,MAAAA,WAAW,EAAXA;AALK,KAAP;AAOD;;SAEDC,oBAAA,6BAAoB;AAClB,QAAI,KAAKpB,KAAL,CAAWK,QAAf,EAAyB,KAAKL,KAAL,CAAWK,QAAX,CAAoB,KAAKU,OAAL,EAApB;AAC1B;;SAEDM,wBAAA,+BAAsBC,SAAtB,EAAiCC,SAAjC,EAA4C;AAC1C,QAAI,KAAKvB,KAAL,CAAWS,YAAf,EACE,OAAO,KAAKT,KAAL,CAAWS,YAAX,CAAwB;AAC7BT,MAAAA,KAAK,EAAE,KAAKA,KADiB;AAE7Ba,MAAAA,KAAK,EAAE,KAAKA,KAFiB;AAG7BS,MAAAA,SAAS,EAAEvB,UAAU,CAACuB,SAAD,CAHQ;AAI7BC,MAAAA,SAAS,EAATA;AAJ6B,KAAxB,CAAP,CADF,KAOK,OAAO,IAAP;AACN;;SAEDC,uBAAA,gCAAuB;AACrB,QAAI,KAAKxB,KAAL,CAAWO,WAAf,EACE,KAAKP,KAAL,CAAWO,WAAX,CAAuB;AACrBM,MAAAA,KAAK,EAAE,KAAKA,KADS;AAErBb,MAAAA,KAAK,EAAED,UAAU,CAAC,KAAKC,KAAN,CAFI;AAGrBG,MAAAA,IAAI,EAAE,KAAKW;AAHU,KAAvB;AAKH;;SAEDW,qBAAA,4BAAmBC,SAAnB,EAA8BC,SAA9B,EAAyCC,QAAzC,EAAmD;AACjD,QAAI,KAAK5B,KAAL,CAAWM,SAAf,EACE,KAAKN,KAAL,CAAWM,SAAX,CACEuB,MAAM,CAACC,MAAP,CAAc,KAAKf,OAAL,EAAd,EAA8B;AAC5BW,MAAAA,SAAS,EAAE3B,UAAU,CAAC2B,SAAD,CADO;AAE5BC,MAAAA,SAAS,EAATA;AAF4B,KAA9B,CADF,EAKEC,QALF;AAOH;;SAEDpB,0BAAA,iCAAwBkB,SAAxB,EAAmCC,SAAnC,EAA8C;AAC5C,QAAI,KAAK3B,KAAL,CAAWQ,uBAAf,EAAwC;AACtC,aAAO,KAAKR,KAAL,CAAWQ,uBAAX,CACLqB,MAAM,CAACC,MAAP,CAAc,KAAKf,OAAL,EAAd,EAA8B;AAC5BW,QAAAA,SAAS,EAAE3B,UAAU,CAAC2B,SAAD,CADO;AAE5BC,QAAAA,SAAS,EAATA;AAF4B,OAA9B,CADK,CAAP;AAMD,KAPD,MAOO;AACL,aAAO,IAAP;AACD;AACF;;SAEDjB,SAAA,kBAAS;AAAA,sBACsB,KAAKV,KAD3B;AAAA,QACC+B,QADD,eACCA,QADD;AAAA,QACWrB,MADX,eACWA,MADX;AAEP,WAAOA,MAAM,GACTA,MAAM,CAAC,KAAKK,OAAL,EAAD,CADG,GAET,OAAOgB,QAAP,KAAoB,UAApB,GACAA,QAAQ,CAAC,KAAKhB,OAAL,EAAD,CADR,GAEAgB,QAAQ,IAAI,IAJhB;AAKD;;;EAnFqBC;;AAAlBpB,UACGqB,eAAe;AACpB/B,EAAAA,eAAe,EAAE,2BAAM,EADH;AAEpBE,EAAAA,OAAO,EAAE;AAAA,WAAO,EAAP;AAAA;AAFW;;AAqFX;AACXQ,EAAAA,SAAS,CAACsB,WAAV,GAAwB,oBAAxB;AACAtB,EAAAA,SAAS,CAACuB,SAAV,GAAsB;AACpBlC,IAAAA,YAAY,EAAEmC,6BAAS,CAACC,MADJ;AAEpBnC,IAAAA,eAAe,EAAEkC,6BAAS,CAACE,IAFP;AAGpBnC,IAAAA,IAAI,EAAEiC,6BAAS,CAACC,MAHI;AAIpBjC,IAAAA,OAAO,EAAEgC,6BAAS,CAACE,IAJC;AAKpBjC,IAAAA,QAAQ,EAAE+B,6BAAS,CAACE,IALA;AAMpBhC,IAAAA,SAAS,EAAE8B,6BAAS,CAACE,IAND;AAOpB/B,IAAAA,WAAW,EAAE6B,6BAAS,CAACE,IAPH;AAQpB9B,IAAAA,uBAAuB,EAAE4B,6BAAS,CAACE,IARf;AASpB7B,IAAAA,YAAY,EAAE2B,6BAAS,CAACE,IATJ;AAUpB5B,IAAAA,MAAM,EAAE0B,6BAAS,CAACE,IAVE;AAWpBP,IAAAA,QAAQ,eAAEK,6BAAS,CAACG,SAAV,CAAoB,CAACH,6BAAS,CAACE,IAAX,EAAiBF,6BAAS,CAACI,IAA3B,CAApB;AAXU,GAAtB;AAaD;;;;;"}