{"version":3,"file":"component-component.cjs.production.min.js","sources":["../src/index.js"],"sourcesContent":["import * as React from \"react\";\nimport PropTypes from \"prop-types\";\n\nlet cleanProps = (props) => {\n  let {\n    initialState,\n    getInitialState,\n    refs,\n    getRefs,\n    didMount,\n    didUpdate,\n    willUnmount,\n    getSnapshotBeforeUpdate,\n    shouldUpdate,\n    render,\n    ...rest\n  } = props;\n  return rest;\n};\n\nclass Component extends React.Component {\n  static defaultProps = {\n    getInitialState: () => {},\n    getRefs: () => ({}),\n  };\n\n  state = this.props.initialState || this.props.getInitialState(this.props);\n  _refs = this.props.refs || this.props.getRefs(this.getArgs());\n  _setState = (...args) => this.setState(...args);\n  _forceUpdate = (...args) => this.forceUpdate(...args);\n\n  getArgs() {\n    const {\n      state,\n      props,\n      _setState: setState,\n      _forceUpdate: forceUpdate,\n      _refs: refs,\n    } = this;\n    return {\n      state,\n      props: cleanProps(props),\n      refs,\n      setState,\n      forceUpdate,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.didMount) this.props.didMount(this.getArgs());\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.shouldUpdate)\n      return this.props.shouldUpdate({\n        props: this.props,\n        state: this.state,\n        nextProps: cleanProps(nextProps),\n        nextState,\n      });\n    else return true;\n  }\n\n  componentWillUnmount() {\n    if (this.props.willUnmount)\n      this.props.willUnmount({\n        state: this.state,\n        props: cleanProps(this.props),\n        refs: this._refs,\n      });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.didUpdate)\n      this.props.didUpdate(\n        Object.assign(this.getArgs(), {\n          prevProps: cleanProps(prevProps),\n          prevState,\n        }),\n        snapshot\n      );\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    if (this.props.getSnapshotBeforeUpdate) {\n      return this.props.getSnapshotBeforeUpdate(\n        Object.assign(this.getArgs(), {\n          prevProps: cleanProps(prevProps),\n          prevState,\n        })\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const { children, render } = this.props;\n    return render\n      ? render(this.getArgs())\n      : typeof children === \"function\"\n      ? children(this.getArgs())\n      : children || null;\n  }\n}\n\nif (__DEV__) {\n  Component.displayName = \"ComponentComponent\";\n  Component.propTypes = {\n    initialState: PropTypes.object,\n    getInitialState: PropTypes.func,\n    refs: PropTypes.object,\n    getRefs: PropTypes.func,\n    didMount: PropTypes.func,\n    didUpdate: PropTypes.func,\n    willUnmount: PropTypes.func,\n    getSnapshotBeforeUpdate: PropTypes.func,\n    shouldUpdate: PropTypes.func,\n    render: PropTypes.func,\n    children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  };\n}\n\nexport { Component };\nexport default Component;\n"],"names":["cleanProps","props","Component","state","_this","initialState","getInitialState","_refs","refs","getRefs","getArgs","_setState","setState","_forceUpdate","forceUpdate","this","componentDidMount","didMount","shouldComponentUpdate","nextProps","nextState","shouldUpdate","componentWillUnmount","willUnmount","componentDidUpdate","prevProps","prevState","snapshot","didUpdate","Object","assign","getSnapshotBeforeUpdate","render","children","React","defaultProps"],"mappings":"iHAGA,IAAIA,EAAa,SAACC,6IAaZA,+IAIAC,8JAMJC,MAAQC,EAAKH,MAAMI,cAAgBD,EAAKH,MAAMK,gBAAgBF,EAAKH,SACnEM,MAAQH,EAAKH,MAAMO,MAAQJ,EAAKH,MAAMQ,QAAQL,EAAKM,aACnDC,UAAY,6BAAkBC,+BAC9BC,aAAe,6BAAkBC,oJAEjCJ,QAAA,eAIeE,EAGTG,KAHFJ,UACcG,EAEZC,KAFFF,aACOL,EACLO,KADFR,YAEK,CACLJ,MAFEY,KALFZ,MAQAF,MAAOD,EAHLe,KAJFd,OAQAO,KAAAA,EACAI,SAAAA,EACAE,YAAAA,MAIJE,kBAAA,WACMD,KAAKd,MAAMgB,UAAUF,KAAKd,MAAMgB,SAASF,KAAKL,cAGpDQ,sBAAA,SAAsBC,EAAWC,UAC3BL,KAAKd,MAAMoB,cACNN,KAAKd,MAAMoB,aAAa,CAC7BpB,MAAOc,KAAKd,MACZE,MAAOY,KAAKZ,MACZgB,UAAWnB,EAAWmB,GACtBC,UAAAA,OAKNE,qBAAA,WACMP,KAAKd,MAAMsB,aACbR,KAAKd,MAAMsB,YAAY,CACrBpB,MAAOY,KAAKZ,MACZF,MAAOD,EAAWe,KAAKd,OACvBO,KAAMO,KAAKR,WAIjBiB,mBAAA,SAAmBC,EAAWC,EAAWC,GACnCZ,KAAKd,MAAM2B,WACbb,KAAKd,MAAM2B,UACTC,OAAOC,OAAOf,KAAKL,UAAW,CAC5Be,UAAWzB,EAAWyB,GACtBC,UAAAA,IAEFC,MAINI,wBAAA,SAAwBN,EAAWC,UAC7BX,KAAKd,MAAM8B,wBACNhB,KAAKd,MAAM8B,wBAChBF,OAAOC,OAAOf,KAAKL,UAAW,CAC5Be,UAAWzB,EAAWyB,GACtBC,UAAAA,KAIG,QAIXM,OAAA,iBAC+BjB,KAAKd,MAA1BgC,IAAAA,SAAUD,IAAAA,cACXA,EACHA,EAAOjB,KAAKL,WACQ,mBAAbuB,EACPA,EAASlB,KAAKL,WACduB,GAAY,SAlFIC,aAAlBhC,EACGiC,aAAe,CACpB7B,gBAAiB,aACjBG,QAAS,iBAAO"}